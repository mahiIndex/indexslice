!function(t,n){"function"==typeof define&&define.amd?define(["jquery"],function(e){return n(t,e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=n(t,require("jquery")):t.lity=n(t,t.jQuery||t.Zepto)}("undefined"!=typeof window?window:this,function(e,v){"use strict";function m(){s[0<x?"addClass":"removeClass"]("lity-active")}function h(e){var t=v.Deferred();return p?(e.one(p,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function t(e,t,n){if(1===arguments.length)return v.extend({},e);if("string"==typeof t){if(void 0===n)return"undefined"==typeof e[t]?null:e[t];e[t]=n}else v.extend(e,t);return this}function i(e){for(var t,n=decodeURI(e).split("&"),i={},r=0,o=n.length;r<o;r++)n[r]&&(i[(t=n[r].split("="))[0]]=t[1]);return i}function r(e,t){return e+(-1<e.indexOf("?")?"&":"?")+v.param(t)}function o(e){return v('<span class="lity-error"/>').append(e)}function n(e){if(!u.test(e))return!1;var t=v('<img src="'+e+'">'),n=v.Deferred(),i=function(){n.reject(o("Failed loading image"))};return t.on("load",function(){return 0===this.naturalWidth?i():void n.resolve(t)}).on("error",i),n.promise()}function a(e){var n;try{n=v(e)}catch(h){return!1}if(!n.length)return!1;var i=v('<span style="display:none !important" class="lity-inline-placeholder"/>');return n.after(i).on("lity:ready",function(e,t){t.one("lity:remove",function(){i.before(n.addClass("lity-hide")).remove()})})}function l(e){var t,n=e;return(t=c.exec(e))&&(n=r("https://www.youtube"+(t[2]||"")+".com/embed/"+t[4],v.extend({autoplay:1},i(t[5]||"")))),(t=f.exec(e))&&(n=r("https://player.vimeo.com/video/"+t[3],v.extend({autoplay:1},i(t[4]||"")))),(t=y.exec(e))&&(n=r("https://www.google."+t[3]+"/maps?"+t[6],{output:0<t[6].indexOf("layer=c")?"svembed":"embed"})),'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+n+'"></iframe></div>'}function d(e){function r(e){27===e.keyCode&&s()}function i(){var e=g.documentElement.clientHeight?g.documentElement.clientHeight:Math.round(w.height());c.css("max-height",Math.floor(e)+"px").trigger("lity:resize",[l])}function o(e,t){l&&(c=v(t),w.on("resize",i),i(),l.find(".lity-loader").each(function(){var e=v(this);h(e).always(function(){e.remove()})}),l.removeClass("lity-loading").find(".lity-content").empty().append(c),c.removeClass("lity-hide").trigger("lity:ready",[l,e]),p.resolve())}function d(e,t,n,i){p=v.Deferred(),x++,m(),l=v(n.template).addClass("lity-loading").appendTo("body"),n.esc&&w.on("keyup",r),setTimeout(function(){l.addClass("lity-opened lity-"+e).on("click","[data-lity-close]",function(e){v(e.target).is("[data-lity-close]")&&s()}).trigger("lity:open",[l,i]),v.when(t).always(v.proxy(o,null,i))},0)}function a(n,e,t){var i,r,o=v.extend({},b,y);if((e=v.extend({},C,f,e)).handler&&o[e.handler])r=o[e.handler](n,u),i=e.handler;else{var a={};v.each(["inline","iframe"],function(e,t){o[t]&&(a[t]=o[t]),delete o[t]});var l=function(e,t){return!t||((r=t(n,u))?(i=e,!1):void 0)};v.each(o,l),i||v.each(a,l)}return r&&v.when(s()).done(v.proxy(d,null,i,r,e,t)),!!r}function s(){if(l){var n=v.Deferred();return p.done(function(){x--,m(),w.off("resize",i).off("keyup",r),c.trigger("lity:close",[l]),l.removeClass("lity-opened").addClass("lity-closed");var e=l,t=c;c=l=null,h(t.add(e)).always(function(){t.trigger("lity:remove",[e]),e.remove(),n.resolve()})}),n.promise()}}function u(e){if(!e.preventDefault)return u.open(e);var t=v(this),n=t.data("lity-target")||t.attr("href")||t.attr("src");n&&(a(n,t.data("lity-options")||t.data("lity"),t)&&(t.blur(),e.preventDefault()))}var l,c,f={},y={},p=v.Deferred().resolve();return u.handlers=v.proxy(t,u,y),u.options=v.proxy(t,u,f),u.open=function(e,t,n){return a(e,t,n),u},u.close=function(){return s(),u},u.options(e)}var g=e.document,w=v(e),s=v("html"),x=0,u=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,c=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,f=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,y=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,b={image:n,inline:a,iframe:l},C={esc:!0,handler:null,template:'<div class="lity" tabindex="-1"><div class="lity-wrap" data-lity-close><div class="lity-loader">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" title="Close (Esc)" data-lity-close>\xd7</button></div></div></div>'},p=function(){var e=g.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return t[n];return!1}();return d.version="1.6.6",d.handlers=v.proxy(t,d,b),d.options=v.proxy(t,d,C),v(g).on("click","[data-lity]",d()),d});